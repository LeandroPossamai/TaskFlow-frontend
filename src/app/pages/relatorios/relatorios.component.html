<p-toast position="top-right"></p-toast>

<div class="container">
  <h2>Relatórios de Horas</h2>

  <form [formGroup]="relatorioForm">
    <div class="form-group">
      <label for="projeto">Projeto</label>
      <p-dropdown
        id="projeto"
        formControlName="projeto"
        [options]="projetos"
        optionLabel="nome"
        placeholder="Selecione um projeto"
      ></p-dropdown>
    </div>

    <div class="form-group">
      <label for="atividade">Atividade</label>
      <p-dropdown
        id="atividade"
        formControlName="atividade"
        [options]="atividades"
        optionLabel="nome"
        placeholder="Selecione uma atividade"
      ></p-dropdown>
    </div>

    <div class="form-group">
      <label for="usuario">Usuário</label>
      <p-dropdown
        id="usuario"
        formControlName="usuario"
        [options]="usuarios"
        optionLabel="nome"
        placeholder="Selecione um usuário"
      ></p-dropdown>
    </div>

    <div class="form-group">
      <label for="dataInicio">Data Inicial</label>
      <p-calendar
        id="dataInicio"
        formControlName="dataInicio"
        showIcon
        dateFormat="dd/mm/yy"
      ></p-calendar>
    </div>

    <div class="form-group">
      <label for="dataFim">Data Final</label>
      <p-calendar
        id="dataFim"
        formControlName="dataFim"
        showIcon
        dateFormat="dd/mm/yy"
      ></p-calendar>
    </div>

    <button
      pButton
      type="button"
      label="Buscar Relatórios"
      (click)="buscarRelatorios()"
    ></button>
  </form>

  <h3>Resultados</h3>
  <p-table [value]="resultados" *ngIf="resultados.length > 0">
    <ng-template pTemplate="header">
      <tr>
        <th>Projeto</th>
        <th>Atividade</th>
        <th>Usuário</th>
        <th>Horas</th>
        <th>Data</th>
      </tr>
    </ng-template>
    <ng-template pTemplate="body" let-item>
      <tr>
        <td>{{ item.projeto }}</td>
        <td>{{ item.atividade }}</td>
        <td>{{ item.usuario }}</td>
        <td>{{ item.horas }}</td>
        <td>{{ item.data }}</td>
      </tr>
    </ng-template>
  </p-table>
</div>
